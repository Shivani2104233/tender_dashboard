<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tender Dashboard — ABSDHGKM</title>

  <!-- Fonts & icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/1b7b2f5b7c.js" crossorigin="anonymous"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="logo">⚡</div>
        <div>
          <h1>Tender Dashboard</h1>
          <p class="muted">ABSDHGKM — smart tender tracking</p>
        </div>
      </div>

      <div class="top-actions">
        <div class="search-wrap">
          <input id="searchInput" placeholder="Search tenders, org, id..." />
          <button id="clearSearch" title="Clear search"><i class="fa-solid fa-xmark"></i></button>
        </div>

        <div class="toggles">
          <button id="importBtn" title="Import CSV"><i class="fa-solid fa-file-import"></i></button>
          <button id="exportBtn" title="Export CSV"><i class="fa-solid fa-file-export"></i></button>
          <button id="chartToggle" title="Show/Hide charts"><i class="fa-solid fa-chart-pie"></i></button>
          <button id="darkModeToggle" title="Dark / Light mode"><i class="fa-solid fa-moon"></i></button>
          <button id="newTenderBtn" class="primary"><i class="fa-solid fa-plus"></i> Add Tender</button>
        </div>
      </div>
    </header>

    <main>
      <section id="controls" class="controls">
        <div class="filters">
          <label>Filter:</label>
          <select id="statusFilter">
            <option value="All">All statuses</option>
            <option value="Submitted">Submitted</option>
            <option value="Pending">Pending</option>
            <option value="Missing Docs">Missing Docs</option>
            <option value="Draft">Draft</option>
            <option value="Awarded">Awarded</option>
          </select>

          <label>Sort by:</label>
          <select id="sortSelect">
            <option value="deadline-asc">Deadline ↑</option>
            <option value="deadline-desc">Deadline ↓</option>
            <option value="value-desc">Value ↓</option>
            <option value="value-asc">Value ↑</option>
            <option value="name-asc">Name A→Z</option>
            <option value="name-desc">Name Z→A</option>
          </select>

          <label>Show rows:</label>
          <select id="pageSize">
            <option>5</option>
            <option selected>10</option>
            <option>20</option>
          </select>
        </div>

        <div class="quick-stats">
          <div class="stat">
            <div id="totalTenders" class="stat-number">0</div>
            <div class="stat-label">Total</div>
          </div>
          <div class="stat">
            <div id="submittedCount" class="stat-number">0</div>
            <div class="stat-label">Submitted</div>
          </div>
          <div class="stat">
            <div id="pendingCount" class="stat-number">0</div>
            <div class="stat-label">Pending</div>
          </div>
          <div class="stat">
            <div id="awardCount" class="stat-number">0</div>
            <div class="stat-label">Awarded</div>
          </div>
        </div>
      </section>

      <section id="charts" class="charts hidden">
        <canvas id="statusChart" height="100"></canvas>
      </section>

      <section class="table-wrap">
        <table class="tenders-table">
          <thead>
            <tr>
              <th data-sort="name">Tender</th>
              <th data-sort="status">Status</th>
              <th data-sort="value">Value (₹)</th>
              <th data-sort="deadline">Deadline</th>
              <th>Org</th>
              <th>Qty</th>
              <th>Departments</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="tenderBody"></tbody>
        </table>

        <div class="pagination" id="pagination"></div>
      </section>
    </main>

    <footer>
      <small>Made with ❤️ for ABSDHGKM — <span id="buildTime"></span></small>
    </footer>
  </div>

  <!-- Modal: Add / Edit -->
  <div id="modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-card">
      <h2 id="modalTitle">Add Tender</h2>
      <form id="tenderForm">
        <div class="form-grid">
          <label>Tender ID<input name="id" required placeholder="T001"/></label>
          <label>Tender Name<input name="name" required placeholder="Name"/></label>
          <label>Organization<input name="org" placeholder="Org"/></label>
          <label>Status>
            <select name="status">
              <option>Submitted</option><option>Pending</option><option>Missing Docs</option><option>Draft</option><option>Awarded</option>
            </select>
          </label>
          <label>Estimated Value (₹)<input name="value" type="number" required/></label>
          <label>Quantity<input name="qty" type="number" /></label>
          <label>Deadline<input name="deadline" type="date" /></label>
          <label>Department 1<input name="dept1" /></label>
          <label>Department 2<input name="dept2" /></label>
          <label>Note<textarea name="note" rows="2"></textarea></label>
        </div>

        <div class="modal-actions">
          <button type="button" id="cancelBtn">Cancel</button>
          <button type="submit" class="primary">Save Tender</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Hidden file input for CSV import -->
  <input id="csvFile" type="file" accept=".csv" style="display:none" />

  <script src="data.js"></script>
  <script src="script.js"></script>
</body>
</html>
